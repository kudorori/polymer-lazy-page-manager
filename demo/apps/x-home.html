<dom-module id="x-home">
	<template>
	<iron-localstorage name="auth" value="{{auth}}"></iron-localstorage>
	<a href="#!/home/list">list</a>
	<a href="#!/home/detail">detail</a>
	<a href="#!/home/detail1">detail1</a>
	<button on-click="test">test</button>
	<button on-click="test1">test1</button>
	<content select="lazy-pages"></content>
	
	</template>
	<script>
		Polymer({
			is:"x-home",
			behaviors:[
				lazyPageBehavior
			],
			properties:{
				
			},
			ready:function(){
				console.log(this.config);
			},
			activeReady:function(){
				this.async(function(){
					console.log(this.config)
				});
			},
			test:function(){
				var m = document.querySelector("#manager");
				m.setRole([
					"/home/list"
				]);
			},
			test1:function(){
// 				console.log(this.lazyPages.filter_pages);
				var m = document.querySelector("#manager");
				m.setRole([]);
			}
		})
	</script>
</dom-module>


<dom-module id="x-home-list">
	<template>
	[[text]]
	<div>
		123
		remark [[abc]]
	</div>
	<template is="dom-repeat" items="[[errors]]">
		<div>
			Error.[[index]] [[item]]
		</div>
	</template>
	
	<content select="lazy-pages"></content>
	</template>
	<script>
		Polymer({
			is:"x-home-list",
			behaviors:[
				lazyPageBehavior
			],
			properties:{
				abc:{
					type:Object,
					statePath:"shared.abc"
				}
			},
			ready:function(){
				
			},
			activeReady:function(){
				console.log("ready");
			},
			case1:function(e){
				//模仿ajax response
				var data = e.detail.response;
				if(data.status==200){
					this.set("text","註冊成功");
					this.set("errors",[]);
				}else{
					this.set("text","註冊失敗");
					this.set("errors",data.errors);				
				}
			}
		})
	</script>
</dom-module>

<dom-module id="x-home-list-2">
	<template>
	testestgsetaafdfafsaf
	
	<content select="lazy-pages"></content>
	</template>
	<script>
		Polymer({
			is:"x-home-list-2",
			behaviors:[
				lazyPageBehavior
			],
			ready:function(){
				
			},
			case1:function(e){
				//模仿ajax response
				var data = e.detail.response;
				if(data.status==200){
					this.set("text","註冊成功");
					this.set("errors",[]);
				}else{
					this.set("text","註冊失敗");
					this.set("errors",data.errors);				
				}
			}
		})
	</script>
</dom-module>

<dom-module id="x-home-detail">
	<style>
		:host{
			width:30vw;
			height:30vh;
			background:#fff;
			display:block;
			
		}
	</style>
	<template>
	[[params.id]]
	detail

	<content></content>
	</template>
	<script>
		Polymer({
			is:"x-home-detail",
			properties:{
				
			},
			behaviors:[
				lazyAnimationDialogBehavior
			],
			ready:function(){
// 				this.open();
			},
			__confirm:function(){
				return this.exit();
			}
		})
	</script>
</dom-module>
